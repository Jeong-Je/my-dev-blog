---
title: Next.js13과 Contentlayer을 이용해서 개인 블로그 만들기
date: 2023-08-30
tags:
- Next.js
description: Next.js13과 Contentlayer을 이용하여 블로그 만드는 법을 정리한 포스트입니다.
---

Next.js13과 Contentlayer을 이용하여 개인 블로그를 만들어 보겠습니다.
Next.js를 사용하는 이유는 대부분의 경우 개인 블로그는 정적 컨텐츠이기에 Next.js의 
[SSG](https://nextjs.org/docs/pages/building-your-application/rendering/static-site-generation)를 사용하면
페이지 로딩속도가 빨라집니다. 또한 Next.js는 풀스택 프레임워크로서 
[SSR](https://nextjs.org/docs/pages/building-your-application/rendering/server-side-rendering)
과 리액트 기반의 [CSR](https://nextjs.org/docs/pages/building-your-application/rendering/client-side-rendering)을 모두 지원하므로
개발의 생산성을 향상시킬 수 있습니다.

***

## 시작
Next.js에서는 프로젝트를 create-next-app을 이용하여 생성할 것을 추천합니다. 필요한 파일들을 자동으로
설치해주기에 웬만해선 안쓸 이유가 없는 것 같습니다. 터미널 창에 
```
npx create-next-app
```

을 입력하여 Next.js 프로젝트를 생성해줍니다.
![Imgur](https://i.imgur.com/sZV9QnD.png)
기본 설정 값을 물어보는데 저는 기본 값으로 했습니다. ([tailwindcss](https://tailwindcss.com/)는 강추👍)

## Contentlayer

Next.js 공식문서에서는 MDX파일 다루는 법으로 `next-mdx-remote`와 `contentlayer` 두 가지를 소개합니다.
저는 그 중에서 contentlayer를 택했습니다.

```
npm i contentlayer next-contentlayer
```
Contentlayer 설치가 다 되었으면 next.config.js 파일에 가셔서 다음 코드를 넣어줍니다.
```js
// next.config.js
const { withContentlayer } = require('next-contentlayer')

/** @type {import('next').NextConfig} */
const nextConfig = { reactStrictMode: true, swcMinify: true }

module.exports = withContentlayer(nextConfig)
```
그리고 프로젝트의 루트에 `contentlayer.config.ts`라는 파일을 만들어서 아래 코드를 입력해줍니다.
```js
//contentlayer.config.ts
import { defineDocumentType, makeSource } from "contentlayer/source-files";

const Post = defineDocumentType(() => ({
  name: "Post",
  filePathPattern: `**/*.mdx`,
  contentType: "mdx",
  fields: {
    title: {
      type: "string",
      description: "The title of the post",
      required: true,
    },
    date: {
      type: "date",
      description: "The date of the post",
      required: true,
    },
  },
  computedFields: {
    url: {
      type: "string",
      resolve: (doc) => `/posts/${doc._raw.flattenedPath}`,
    },
  },
}));

export default makeSource({
  contentDirPath: "posts",
  documentTypes: [Post],
});
```
이제 MDX 파일을 만들어 봅시다. 프로젝트의 루트에 `posts` 폴더를 만든 후 안에 `test-01.mdx`파일을 만듭니다.

```
---
title: "How to create Next.js app"
date: 2023-04-06
---

# Install Next.js

### Fist you need to install Next.js with the following command:

npm i create-next-app@latest
```
여기까지 오신 다음 `npm run dev`로 서버를 엽니다. 콘솔창에 아래와 같이 `.contentlayer` 폴더에
1개의 문서가 생성되었다는 문구가 나오면 성공입니다.

```
- event compiled client and server successfully in 1284 ms (20 modules)
Generated 1 documents in .contentlayer
- wait compiling...
- event compiled client and server successfully in 85 ms (20 modules)
```
![Imgur](https://imgur.com/xCUFUzb.png)

아래와 같이 `.contentlayer` 폴더에 제가 만든 `test-01.mdx`파일이 json 형태로 저장된 것을 볼 수 있습니다.